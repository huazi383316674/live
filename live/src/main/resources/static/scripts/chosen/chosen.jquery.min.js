(function(){var c,g,f,h,e=function(b,a){return function(){return b.apply(a,arguments)}};h=this;c=jQuery;c.fn.extend({chosen:function(b,a){return c.browser==="msie"&&(c.browser.version==="6.0"||c.browser.version==="7.0")?this:c(this).each(function(){if(!c(this).hasClass("chzn-done"))return new g(this,b,a)})}});g=function(){function b(a){this.set_default_values();this.form_field=a;this.form_field_jq=c(this.form_field);this.is_multiple=this.form_field.multiple;this.is_rtl=this.form_field_jq.hasClass("chzn-rtl");
this.default_text_default=this.form_field.multiple?"\u8bf7\u8f93\u5165(\u6a21\u7cca\u67e5\u8be2)...":"\u9009\u62e9\u4e00\u4e2a\u9009\u9879";this.set_up_html();this.register_observers();this.form_field_jq.addClass("chzn-done")}b.prototype.set_default_values=function(){this.click_test_action=e(function(a){return this.test_active_click(a)},this);this.results_showing=this.mouse_on_container=this.active_field=!1;this.result_single_selected=this.result_highlighted=null;return this.choices=0};b.prototype.set_up_html=
function(){var a,d;this.container_id=this.form_field.id.length?this.form_field.id.replace(/(:|\.)/g,"_"):this.generate_field_id();this.container_id+="_chzn";this.f_width=this.form_field_jq.width();this.default_text=this.form_field_jq.data("placeholder")?this.form_field_jq.data("placeholder"):this.default_text_default;a=c("<div />",{id:this.container_id,"class":"chzn-container "+(this.is_rtl?"chzn-rtl":""),style:"width: "+this.f_width+"px;"});this.is_multiple?a.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+
this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>'):a.html('<a href="#" class="chzn-single"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>');this.form_field_jq.hide().after(a);this.container=c("#"+this.container_id);this.container.addClass("chzn-container-"+
(this.is_multiple?"multi":"single"));this.dropdown=this.container.find("div.chzn-drop").first();a=this.container.height();d=this.f_width-f(this.dropdown);this.dropdown.css({width:d+"px",top:a+"px"});this.search_field=this.container.find("input").first();this.search_results=this.container.find("ul.chzn-results").first();this.search_field_scale();this.search_no_results=this.container.find("li.no-results").first();this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=
this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),this.selected_item=this.container.find(".chzn-single").first(),a=d-f(this.search_container)-f(this.search_field),this.search_field.css({width:a+"px"}));this.results_build();return this.set_tab_index()};b.prototype.register_observers=function(){this.container.mousedown(e(function(a){return this.container_mousedown(a)},this));this.container.mouseenter(e(function(a){return this.mouse_enter(a)},
this));this.container.mouseleave(e(function(a){return this.mouse_leave(a)},this));this.search_results.mouseup(e(function(a){return this.search_results_mouseup(a)},this));this.search_results.mouseover(e(function(a){return this.search_results_mouseover(a)},this));this.search_results.mouseout(e(function(a){return this.search_results_mouseout(a)},this));this.form_field_jq.bind("liszt:updated",e(function(a){return this.results_update_field(a)},this));this.search_field.blur(e(function(a){return this.input_blur(a)},
this));this.search_field.keyup(e(function(a){return this.keyup_checker(a)},this));this.search_field.keydown(e(function(a){return this.keydown_checker(a)},this));return this.is_multiple?(this.search_choices.click(e(function(a){return this.choices_click(a)},this)),this.search_field.focus(e(function(a){return this.input_focus(a)},this))):this.selected_item.focus(e(function(a){return this.activate_field(a)},this))};b.prototype.container_mousedown=function(a){a&&a.type==="mousedown"&&a.stopPropagation();
if(this.pending_destroy_click)return this.pending_destroy_click=!1;else{if(this.active_field){if(!this.is_multiple&&a&&(c(a.target)===this.selected_item||c(a.target).parents("a.chzn-single").length))a.preventDefault(),this.results_toggle()}else this.is_multiple&&this.search_field.val(""),c(document).click(this.click_test_action),this.results_show();return this.activate_field()}};b.prototype.mouse_enter=function(){return this.mouse_on_container=!0};b.prototype.mouse_leave=function(){return this.mouse_on_container=
!1};b.prototype.input_focus=function(){if(!this.active_field)return setTimeout(e(function(){return this.container_mousedown()},this),50)};b.prototype.input_blur=function(){if(!this.mouse_on_container)return this.active_field=!1,setTimeout(e(function(){return this.blur_test()},this),100)};b.prototype.blur_test=function(){if(!this.active_field&&this.container.hasClass("chzn-container-active"))return this.close_field()};b.prototype.close_field=function(){c(document).unbind("click",this.click_test_action);
this.is_multiple||(this.selected_item.attr("tabindex",this.search_field.attr("tabindex")),this.search_field.attr("tabindex",-1));this.active_field=!1;this.results_hide();this.container.removeClass("chzn-container-active");this.winnow_results_clear();this.clear_backstroke();this.show_search_field_default();return this.search_field_scale()};b.prototype.activate_field=function(){!this.is_multiple&&!this.active_field&&(this.search_field.attr("tabindex",this.selected_item.attr("tabindex")),this.selected_item.attr("tabindex",
-1));this.container.addClass("chzn-container-active");this.active_field=!0;this.search_field.val(this.search_field.val());return this.search_field.focus()};b.prototype.test_active_click=function(a){return c(a.target).parents("#"+this.container_id).length?this.active_field=!0:this.close_field()};b.prototype.results_build=function(){var a,d,b,c,f;this.parsing=!0;this.results_data=h.SelectParser.select_to_array(this.form_field);this.is_multiple&&this.choices>0?(this.search_choices.find("li.search-choice").remove(),
this.choices=0):this.is_multiple||this.selected_item.find("span").text(this.default_text);a="";f=this.results_data;for(b=0,c=f.length;b<c;b++)d=f[b],d.group?a+=this.result_add_group(d):d.empty||(a+=this.result_add_option(d),d.selected&&this.is_multiple?this.choice_build(d):d.selected&&!this.is_multiple&&this.selected_item.find("span").text(d.text));this.show_search_field_default();this.search_field_scale();this.search_results.html(a);return this.parsing=!1};b.prototype.result_add_group=function(a){return a.disabled?
"":(a.dom_id=this.container_id+"_g_"+a.array_index,'<li id="'+a.dom_id+'" class="group-result">'+c("<div />").text(a.label).html()+"</li>")};b.prototype.result_add_option=function(a){var d;return a.disabled?"":(a.dom_id=this.container_id+"_o_"+a.array_index,d=a.selected&&this.is_multiple?[]:["active-result"],a.selected&&d.push("result-selected"),a.group_array_index!=null&&d.push("group-option"),'<li id="'+a.dom_id+'" class="'+d.join(" ")+'">'+a.html+"</li>")};b.prototype.results_update_field=function(){this.result_clear_highlight();
this.result_single_selected=null;return this.results_build()};b.prototype.result_do_highlight=function(a){var d,b,c,f;if(a.length)if(this.result_clear_highlight(),this.result_highlight=a,this.result_highlight.addClass("highlighted"),b=parseInt(this.search_results.css("maxHeight"),10),f=this.search_results.scrollTop(),c=b+f,d=this.result_highlight.position().top+this.search_results.scrollTop(),a=d+this.result_highlight.outerHeight(),a>=c)return this.search_results.scrollTop(a-b>0?a-b:0);else if(d<
f)return this.search_results.scrollTop(d)};b.prototype.result_clear_highlight=function(){this.result_highlight&&this.result_highlight.removeClass("highlighted");return this.result_highlight=null};b.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()};b.prototype.results_show=function(){this.is_multiple||(this.selected_item.addClass("chzn-single-with-drop"),this.result_single_selected&&this.result_do_highlight(this.result_single_selected));this.dropdown.css({top:(this.is_multiple?
this.container.height():this.container.height()-1)+"px",left:0});this.results_showing=!0;this.search_field.focus();this.search_field.val(this.search_field.val());return this.winnow_results()};b.prototype.results_hide=function(){this.is_multiple||this.selected_item.removeClass("chzn-single-with-drop");this.result_clear_highlight();this.dropdown.css({left:"-9000px"});return this.results_showing=!1};b.prototype.set_tab_index=function(){var a;if(this.form_field_jq.attr("tabindex"))return a=this.form_field_jq.attr("tabindex"),
this.form_field_jq.attr("tabindex",-1),this.is_multiple?this.search_field.attr("tabindex",a):(this.selected_item.attr("tabindex",a),this.search_field.attr("tabindex",-1))};b.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))};b.prototype.search_results_mouseup=function(a){var d;d=c(a.target).hasClass("active-result")?
c(a.target):c(a.target).parents(".active-result").first();if(d.length)return this.result_highlight=d,this.result_select(a)};b.prototype.search_results_mouseover=function(a){if(a=c(a.target).hasClass("active-result")?c(a.target):c(a.target).parents(".active-result").first())return this.result_do_highlight(a)};b.prototype.search_results_mouseout=function(a){if(c(a.target).hasClass("active-result"))return this.result_clear_highlight()};b.prototype.choices_click=function(a){a.preventDefault();if(this.active_field&&
!c(a.target).hasClass("search-choice")&&!this.results_showing)return this.results_show()};b.prototype.choice_build=function(a){var d;d=this.container_id+"_c_"+a.array_index;this.choices+=1;this.search_container.before('<li class="search-choice" id="'+d+'"><span>'+a.html+'</span><a href="#" class="search-choice-close" rel="'+a.array_index+'"></a></li>');return c("#"+d).find("a").first().click(e(function(a){return this.choice_destroy_link_click(a)},this))};b.prototype.choice_destroy_link_click=function(a){a.preventDefault();
this.pending_destroy_click=!0;return this.choice_destroy(c(a.target))};b.prototype.choice_destroy=function(a){this.choices-=1;this.show_search_field_default();this.is_multiple&&this.choices>0&&this.search_field.val().length<1&&this.results_hide();this.result_deselect(a.attr("rel"));return a.parents("li").first().remove()};b.prototype.result_select=function(a){var d,b;if(this.result_highlight)return d=this.result_highlight,b=d.attr("id"),this.result_clear_highlight(),d.addClass("result-selected"),
this.is_multiple?this.result_deactivate(d):this.result_single_selected=d,d=b.substr(b.lastIndexOf("_")+1),d=this.results_data[d],d.selected=!0,this.form_field.options[d.options_index].selected=!0,this.is_multiple?this.choice_build(d):this.selected_item.find("span").first().text(d.text),(!a.metaKey||!this.is_multiple)&&this.results_hide(),this.search_field.val(""),this.form_field_jq.trigger("change"),this.search_field_scale()};b.prototype.result_activate=function(a){return a.addClass("active-result").show()};
b.prototype.result_deactivate=function(a){return a.removeClass("active-result").hide()};b.prototype.result_deselect=function(a){var d;d=this.results_data[a];d.selected=!1;this.form_field.options[d.options_index].selected=!1;c("#"+this.container_id+"_o_"+a).removeClass("result-selected").addClass("active-result").show();this.result_clear_highlight();this.winnow_results();this.form_field_jq.trigger("change");return this.search_field_scale()};b.prototype.results_search=function(){return this.results_showing?
this.winnow_results():this.results_show()};b.prototype.winnow_results=function(){var a,d,b,f,e,h,g,l,i,j,m,n,k;this.no_results_clear();h=0;g=this.search_field.val()===this.default_text?"":c("<div/>").text(c.trim(this.search_field.val())).html();g.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");l=RegExp(g.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");k=this.results_data;for(i=0,m=k.length;i<m;i++)if(d=k[i],!d.disabled&&!d.empty)if(d.group)c("#"+d.dom_id).hide();else if(!this.is_multiple||!d.selected){a=
!1;e=d.dom_id;if(d.html.indexOf(g)>-1)a=!0,h+=1;else if(d.html.indexOf(" ")>=0||d.html.indexOf("[")===0)if(f=d.html.replace(/\[|\]/g,"").split(" "),f.length)for(j=0,n=f.length;j<n;j++)b=f[j],d.html.indexOf(b)>-1&&(a=!0,h+=1);a?(g.length?(a=d.html.search(l),b=d.html.substr(0,a+g.length)+"</em>"+d.html.substr(a+g.length),b=b.substr(0,a)+"<em>"+b.substr(a)):b=d.html,c("#"+e).html!==b&&c("#"+e).html(b),this.result_activate(c("#"+e)),d.group_array_index!=null&&c("#"+this.results_data[d.group_array_index].dom_id).show()):
(this.result_highlight&&e===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(c("#"+e)))}return h<1&&g.length?this.no_results(g):this.winnow_results_set_highlight()};b.prototype.winnow_results_clear=function(){var a,d,b,f,e;this.search_field.val("");d=this.search_results.find("li");e=[];for(b=0,f=d.length;b<f;b++)a=d[b],a=c(a),e.push(a.hasClass("group-result")?a.show():!this.is_multiple||!a.hasClass("result-selected")?this.result_activate(a):void 0);return e};
b.prototype.winnow_results_set_highlight=function(){var a;if(!this.result_highlight&&(a=!this.is_multiple?this.search_results.find(".result-selected"):[],a=a.length?a.first():this.search_results.find(".active-result").first(),a!=null))return this.result_do_highlight(a)};b.prototype.no_results=function(a){var b;b=c('<li class="no-results">\u6ca1\u6709\u5339\u914d\u7ed3\u679c "<span></span>"</li>');b.find("span").first().html(a);return this.search_results.append(b)};b.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()};
b.prototype.keydown_arrow=function(){var a;this.result_highlight?this.results_showing&&(a=this.result_highlight.nextAll("li.active-result").first())&&this.result_do_highlight(a):(a=this.search_results.find("li.active-result").first())&&this.result_do_highlight(c(a));if(!this.results_showing)return this.results_show()};b.prototype.keyup_arrow=function(){var a;if(!this.results_showing&&!this.is_multiple)return this.results_show();else if(this.result_highlight)return a=this.result_highlight.prevAll("li.active-result"),
a.length?this.result_do_highlight(a.first()):(this.choices>0&&this.results_hide(),this.result_clear_highlight())};b.prototype.keydown_backstroke=function(){return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(this.pending_backstroke=this.search_container.siblings("li.search-choice").last(),this.pending_backstroke.addClass("search-choice-focus"))};b.prototype.clear_backstroke=function(){this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus");
return this.pending_backstroke=null};b.prototype.keyup_checker=function(a){var b,c;b=(c=a.which)!=null?c:a.keyCode;this.search_field_scale();switch(b){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices>0)return this.keydown_backstroke();else if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:a.preventDefault();if(this.results_showing)return this.result_select(a);break;case 27:if(this.results_showing)return this.results_hide();break;
case 9:case 38:case 40:case 91:case 17:break;default:return this.results_search()}};b.prototype.keydown_checker=function(a){var b,c;b=(c=a.which)!=null?c:a.keyCode;this.search_field_scale();b!==8&&this.pending_backstroke&&this.clear_backstroke();switch(b){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.mouse_on_container=!1;break;case 13:a.preventDefault();break;case 38:a.preventDefault();this.keyup_arrow();break;case 40:this.keydown_arrow()}};b.prototype.search_field_scale=
function(){var a,b,f,e,g;if(this.is_multiple){b="position:absolute; left: -1000px; top: -1000px; display:none;";f="font-size,font-style,font-weight,font-family,line-height,text-transform,letter-spacing".split(",");for(e=0,g=f.length;e<g;e++)a=f[e],b+=a+":"+this.search_field.css(a)+";";a=c("<div />",{style:b});a.text(this.search_field.val());c("body").append(a);b=a.width()+25;a.remove();b>this.f_width-10&&(b=this.f_width-10);this.search_field.css({width:b+"px"});a=this.container.height();return this.dropdown.css({top:a+
"px"})}};b.prototype.generate_field_id=function(){var a;a=this.generate_random_id();return this.form_field.id=a};b.prototype.generate_random_id=function(){var a;for(a="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();c("#"+a).length>0;)a+=this.generate_random_char();return a};b.prototype.generate_random_char=function(){var a;a=Math.floor(Math.random()*36);return"0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZ".substring(a,a+1)};return b}();f=function(b){return b.outerWidth()-
b.width()};h.get_side_border_padding=f}).call(this);
(function(){var c;c=function(){function c(){this.options_index=0;this.parsed=[]}c.prototype.add_node=function(c){return c.nodeName==="OPTGROUP"?this.add_group(c):this.add_option(c)};c.prototype.add_group=function(c){var h,e,b,a,d,g;h=this.parsed.length;this.parsed.push({array_index:h,group:!0,label:c.label,children:0,disabled:c.disabled});d=c.childNodes;g=[];for(b=0,a=d.length;b<a;b++)e=d[b],g.push(this.add_option(e,h,c.disabled));return g};c.prototype.add_option=function(c,g,e){if(c.nodeName==="OPTION")return c.text!==
""?(g!=null&&(this.parsed[g].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:c.value,text:c.text,html:c.innerHTML,selected:c.selected,disabled:e===!0?e:c.disabled,group_array_index:g})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1};return c}();c.select_to_array=function(g){var f,h,e,b;f=new c;b=g.childNodes;for(h=0,e=b.length;h<e;h++)g=b[h],f.add_node(g);return f.parsed};this.SelectParser=
c}).call(this);
